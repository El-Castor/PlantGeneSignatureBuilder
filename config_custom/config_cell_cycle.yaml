# =============================================================================
# Cell Cycle & Division Gene Signature - Capped Multi-Evidence Scoring v3.1
# =============================================================================

output_prefix: "cell_cycle_scored"

input_go_file: "/Users/clpichot/Documents/BIO-INFO/GENOMES/Brachypodium_distachyon/functionnal_annotation/fctionalAnno_Bd21-3_ownMethode/Bd21-3_v1.2/GOannotation.tsv"

go_level_filter: "BP"

id_mapping:
  protein_to_core_regex: "^(BdiBd21-3\\.\\dG\\d{7})"
  seurat_suffix: ".v1.2"

# =============================================================================
# SCORING CONFIGURATION
# =============================================================================
scoring:
  
  caps:
    go_max: 15
    domain_max: 10
    orthology_max: 6
    tair_max: 20
    po_max: 4
    synergy_max: 6
  
  weights:
    
    go:
      Mitosis:
        "GO:0000278": 3  # mitotic cell cycle
        "GO:0007067": 3  # mitotic nuclear division
        "GO:0051301": 2  # cell division
        "GO:0000280": 2  # nuclear division
      
      Meiosis:
        "GO:0051321": 3  # meiotic cell cycle
        "GO:0007126": 3  # meiotic nuclear division
        "GO:0140013": 2  # meiotic nuclear division
      
      Cytokinesis:
        "GO:0000910": 3  # cytokinesis
        "GO:0032465": 2  # regulation of cytokinesis
        "GO:0061952": 2  # midbody
      
      Cell_Cycle_Regulation:
        "GO:0051726": 3  # regulation of cell cycle
        "GO:0010564": 2  # regulation of cell cycle process
        "GO:0045786": 2  # negative regulation of cell cycle
        "GO:0045787": 2  # positive regulation of cell cycle
        "GO:0000082": 2  # G1/S transition of mitotic cell cycle
        "GO:0000086": 2  # G2/M transition of mitotic cell cycle
    
    domain_match:
      hit: 2
    
    orthology:
      best_hit_multiplier: 3
      one_to_one_bonus: 2
      min_best_score_for_points: 0.5
    
    tair_keywords:
      hit: 2
    
    po_keywords:
      hit: 1
  
  synergy_rules:
    - name: "cell_cycle_GO+domain"
      if_all:
        - "has_Mitosis_GO or has_Meiosis_GO or has_Cytokinesis_GO or has_Cell_Cycle_Regulation_GO"
        - "has_expected_domain"
      bonus: 3

# =============================================================================
# DOMAIN DATABASE
# =============================================================================
domain_database:
  enabled: true
  
  pfam_database: "resources/domains/pfam/Pfam-A.hmm"
  protein_fasta: "/Users/clpichot/Documents/BIO-INFO/GENOMES/Brachypodium_distachyon/Phytozome/PhytozomeV13/BdistachyonBd21-3/v1.2/annotation/BdistachyonBd21_3_537_v1.2.protein.fa"
  
  evalue_threshold: 1e-5
  cpu: 4
  
  expected_domains:
    Mitosis:
      - "PF00149"  # Cyclin (cell cycle regulator)
      - "PF00069"  # Protein kinase (CDKs)
      - "PF02984"  # Cyclin_C (cyclin C-terminal)
      - "PF00400"  # WD40 (cell cycle proteins)
      - "PF08646"  # Separase (chromosome segregation)
    
    Meiosis:
      - "PF03962"  # REC8 (meiotic cohesin)
      - "PF04504"  # SPO11 (meiotic recombination)
      - "PF14295"  # MSH4 (meiotic recombination)
    
    Cytokinesis:
      - "PF00225"  # Kinesin motor (chromosome/vesicle transport)
      - "PF00022"  # Actin (cytoskeleton)
      - "PF00350"  # Dynamin (membrane fission)
    
    Cell_Cycle_Regulation:
      - "PF00646"  # F-box (SCF E3 ubiquitin ligase)
      - "PF12937"  # F-box-like
      - "PF00023"  # Ankyrin repeat (regulatory proteins)
      - "PF13637"  # Ankyrin repeats

# =============================================================================
# EVIDENCE LAYERS
# =============================================================================
evidence:
  
  orthology_evidence:
    enabled: true
    orthology_file: "/Users/clpichot/Documents/BIO-INFO/GENOMES/Brachypodium_distachyon/Phytozome/PhytozomeV13/BdistachyonBd21-3/v1.2/orthology/inparanoid_BdistachyonBd21_3_537_v1.2/inParanoid_BdistachyonBd21_3_537_v1.2_Athaliana_447_Araport11.tsv"
    
    mapping_rules:
      brachy_id_regex_extract: "BdiBd21-3\\.\\dG\\d{7}"
      arabidopsis_id_regex_extract: "AT[1-5MC]G\\d{5}"
  
  arabidopsis_context:
    enabled: false
    
    gff3_file: "resources/arabidopsis/Araport11_GFF3_genes_transposons.20250813.gff"
    po_annotation_file: "resources/arabidopsis/Arabidopsis_annotation_gene.txt"
    
    keywords:
      - "mitosis"
      - "meiosis"
      - "cell cycle"
      - "cytokinesis"
      - "cyclin"
      - "CDK"
  
  po_context:
    enabled: false

# =============================================================================
# SELECTION METHOD
# =============================================================================
selection:
  mode: "quantile"
  quantile: 0.90
